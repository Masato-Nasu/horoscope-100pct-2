# 🌟 100% 星占い

**100% 星占い** は、太陽‐月の伸開角を本格的に計算（Meeus 法）し、毎日の運勢を「100% スコア」で表示する占いアプリです。  
12星座の一般論ではなく、**恋愛・仕事・金運・健康** を数値（バー表示）と短い解説で具体化します。

---

## 🚀 実行ページ

👉 **https://masato-nasu.github.io/horoscope-100pct/**

> スマートフォンでアクセスすると、ホーム画面に追加してアプリのように使えます（PWA）。

---

## 📸 スクリーンショット

**トップ画面**

<p align="center">
  <img src="docs/screenshot-top.png" alt="トップ画面" width="420">
</p>

**結果画面**

<p align="center">
  <img src="docs/screenshot-result.png" alt="結果画面" width="420">
</p>

---

## 🔮 特長

- **本格的な暦算（Meeus）** — 太陽・月の黄経から **伸開角** を算出  
- **100% スコアバー** — 各分野の調子を一目で把握  
- **ジャンル別アドバイス** — 恋愛・仕事・金運・健康をコンパクトに解説  
- **任意日も占える** — 今日／指定日を自由に設定  
- **オフラインでも軽快** — PWA + キャッシュでサクサク

---

## 🧭 Meeus 暦算とは

本アプリの天体計算は、ベルギーの天文学者 **Jean Meeus（ジャン・ミュース）** による  
『*Astronomical Algorithms*』（1998, Willmann–Bell刊）に基づいています。

Meeus 法は NASA/JPL の **DE430/DE440 天体暦** に匹敵する精度を持ち、  
太陽・月・惑星の位置を **±0.5° 程度** の誤差で算出します。  
ブラウザ内で完結する軽量演算ながら、観測値とほぼ一致する信頼性の高い手法です。

---

## ⚙️ アルゴリズム概要（現行実装）

1. **天体位置の計算（Meeus）**：解析日の正午（＋出生時刻補正）で太陽・月の黄経を算出  
2. **相（アスペクト）近傍の評価**：60/120/240/300° は加点、0/180/270° 近傍は減点  
3. **カテゴリ別スコア化**：角度スコア＋カテゴリ微調整＋日付固定の微ノイズ → **0–100%**  
4. **文章生成**：重複しにくいテンプレからコンパクトな助言を選出

> 旧仕様の「多天体解析」「シグモイド正規化」は、速度と明快さのため現行モデルに統一。

---

## 📰 ニュース & 季節感

- ニュース：**GNews API**（失敗時は **NHK RSS** に自動フォールバック）  
- 解析日の**季節トーン**（春夏秋冬の一言）を併記

**APIキー設定**：`index.html` の `GNEWS_API_KEY` に自分のキーをセット

---

## 🖼 結果の保存（JPEG）

- 「**JPEG保存**」ボタン or **S キー**  
- ファイル名：`horoscope_YYYYMMDD_HHMM[_任意日]_誕生日_出生時刻.jpg`

---

📲 インストール方法（PWA）

このアプリは PWA（Progressive Web App） に対応しており、
ブラウザからホーム画面に追加すると、ストアアプリのように使えます。
一度追加すれば オフラインでも起動 できます。

✅ Android（Chrome）

アプリページを Chrome で開く

右上メニュー「︙」→ ［アプリをインストール］ を選択

ホーム画面に「100% 星占い」アイコンが追加されます

以後はアイコンから直接起動（全画面・アドレスバーなし）

✅ iPhone / iPad（Safari）

Safari でページを開く

画面下の共有ボタン「□↑」をタップ

下にスクロールして ［ホーム画面に追加］ を選択

右上の「追加」を押すと、ホームにアイコンが並びます

💡 iOS版では、初回起動時にスプラッシュ画面が表示されます。
